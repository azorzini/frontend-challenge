(this["webpackJsonpfrontend-challenge"]=this["webpackJsonpfrontend-challenge"]||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),i=n.n(c),o=(n(95),n(14)),l=n(15),s=n(170),u=n(143),d=n(168),m=n(144),f=n(145),b=n(166),p=n(147),v=n(149),E=n(148),j=n(72),O=n.n(j),h=n(169),g=n(164),w=n(22),x=n(30),k=Object(x.b)({name:"selectedPost",initialState:"",reducers:{selectPost:function(e,t){return t.payload}}}),P=k.reducer,y=k.actions.selectPost,S=n(41),_=n(58),N=Object(x.b)({name:"allPosts",initialState:[],reducers:{addPosts:function(e,t){return[].concat(Object(_.a)(e),Object(_.a)(t.payload.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{read:!1,dismissed:!1})}))))},dismissPosts:function(e){return[]},dismissSinglePost:function(e,t){e.find((function(e){return e.data.id===t.payload})).dismissed=!0},markAsRead:function(e,t){e.find((function(e){return e.data.id===t.payload})).read=!0}}}),C=N.reducer,R=N.actions,B=R.addPosts,I=R.dismissPosts,A=R.markAsRead,W=R.dismissSinglePost,D=n(46);function T(){var e=Object(o.a)(["\n  transition: max-height 0.15s ease-in-out;\n  max-height: ","px;\n  overflow: hidden;\n"]);return T=function(){return e},e}function L(){var e=Object(o.a)(["\n  color: #9b9b9b;\n"]);return L=function(){return e},e}var F=l.a.span(L()),G=l.a.div(T(),(function(e){return e.dismissed?0:999})),J=["spoiler","self","default","nsfw"],M=Object(a.forwardRef)((function(e,t){var n=e.post,a=n.data,c=a.id,i=a.title,o=a.thumbnail,l=a.author,j=a.created_utc,x=n.read,k=n.dismissed,P=Object(w.b)(),S=function(e){var t=Object(h.a)(e),n=Object(g.a)(t,Date.now(),{roundingMethod:"floor"});return"".concat(n," ago")}(j),_=J.includes(o),N=Object(w.c)((function(e){return e.allPosts.find((function(t){return t.data.id===e.selectedPost}))}));return r.a.createElement(G,{dismissed:k},r.a.createElement(s.a,{ref:t,button:!0,onClick:function(){P(y(c)),P(A(c))},alignItems:"flex-start"},r.a.createElement(u.a,null,r.a.createElement(d.a,{alt:"thumbnail",src:_?O.a:o})),r.a.createElement(m.a,{primary:x?r.a.createElement(F,null,i):i,secondary:r.a.createElement(r.a.Fragment,null,"by ",r.a.createElement("b",null,"u/",l)," ",S)}),r.a.createElement(f.a,null,r.a.createElement(b.a,{title:"Dismiss"},r.a.createElement(p.a,{onClick:function(){Object(D.has)(N,"data.id")&&N.data.id===c&&P(y(null)),P(W(c))},color:"secondary",edge:"end","aria-label":"delete"},r.a.createElement(E.a,null))))),r.a.createElement(v.a,{variant:"inset",component:"li"}))})),U=n(150),$=n(151);function q(){var e=Object(o.a)(["\n  margin-left: 40%;\n"]);return q=function(){return e},e}function z(){var e=Object(o.a)(["\n  width: 100%;\n"]);return z=function(){return e},e}var H=Object(l.a)(U.a)(z()),K=Object(l.a)(s.a)(q()),Q=function(){return r.a.createElement(K,{alignItems:"center"},r.a.createElement($.a,null))},V=function(e){var t=e.posts,n=e.setAfterTag,c=e.loading,i=e.error,o=Object(a.useRef)();return Object(a.useEffect)((function(){if(!c){var e=o.current;if(e){var a=new IntersectionObserver((function(e){e[0].isIntersecting&&n(Object(D.last)(t).data.name)}));return a.observe(o.current),function(){e&&a.unobserve(e)}}}}),[c,t,n]),r.a.createElement(H,null,t.map((function(e,n){return t.length===n+1?r.a.createElement(M,{key:e.data.id,ref:o,post:e}):r.a.createElement(M,{key:e.data.id,post:e})})),r.a.createElement("div",null,c&&r.a.createElement(Q,null)),r.a.createElement("div",null,i&&"Error"))},X=n(29),Y=n(152),Z=n(153),ee=n(154),te=n(155),ne=n(156),ae=n(157);function re(){var e=Object(o.a)(["\n  text-align: -webkit-center;\n"]);return re=function(){return e},e}function ce(){var e=Object(o.a)(["\n  text-align: -webkit-center;\n  margin: 10px 0;\n"]);return ce=function(){return e},e}function ie(){var e=Object(o.a)(["\n  text-align: -webkit-center;\n  margin: 20px 20px;\n"]);return ie=function(){return e},e}function oe(){var e=Object(o.a)(["\n  max-width: 100%; \n  display:block; \n  height: auto;\n"]);return oe=function(){return e},e}var le=l.a.img(oe()),se=function(e){var t,n,a=e.post.data,c=a.post_hint,i=a.selftext,o=a.title,l=a.url,s=a.secure_media,u=a.preview;switch(c){case"image":return r.a.createElement(le,{src:l,alt:o});case"hosted:video":case"link":case"rich:video":var d=(null!==(t=null!==(n=null===u||void 0===u?void 0:u.reddit_video_preview)&&void 0!==n?n:null===s||void 0===s?void 0:s.reddit_video)&&void 0!==t?t:{fallback_url:null}).fallback_url;return d?r.a.createElement("div",{className:"embed-responsive embed-responsive-1by1"},r.a.createElement("video",{controls:!0,autoPlay:!0,loop:!0,className:"embed-responsive-item"},r.a.createElement("source",{src:d,type:"video/mp4"}))):r.a.createElement(fe,null," There was an error displaying the video ");default:return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,null,i))}},ue=function(){return r.a.createElement(be,null,r.a.createElement(Y.a,{title:"Select a post to see details"}))},de=function(e){var t=e.post;if(!t)return r.a.createElement(ue,null);var n=t.data,a=n.title,c=n.subreddit_name_prefixed,i=n.author,o=n.num_comments,l=n.score;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(te.a,null,r.a.createElement(Y.a,{title:a,subheader:"".concat(c," Posted by ").concat(i)}),r.a.createElement(me,null,r.a.createElement(se,{post:t})),r.a.createElement(ne.a,null,r.a.createElement(X.a,{variant:"body1",color:"textPrimary",component:"p"},"With ",r.a.createElement("strong",null,o)," comments and a score of ",r.a.createElement("strong",null,l))))))},me=Object(l.a)(ae.a)(ie()),fe=Object(l.a)(X.a)(ce()),be=Object(l.a)(te.a)(re()),pe=n(39),ve=n(35),Ee=n(158),je=n(12),Oe=n(159),he=n(160),ge=n(161),we=n(163),xe=n(167),ke=n(165),Pe=n(162),ye=n(56),Se=n.n(ye),_e=n(81),Ne=n(57),Ce=n.n(Ne),Re=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current},Be=function(e){var t=Object(a.useState)(!0),n=Object(pe.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(pe.a)(i,2),l=o[0],s=o[1],u=Re(e),d=Object(w.c)((function(e){return e.allPosts})),m=Object(w.c)((function(e){return e.allPosts.find((function(t){return t.data.id===e.selectedPost}))})),f=Object(w.b)(),b=Object(a.useCallback)(Object(_e.a)(Se.a.mark((function t(){var n,a;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({limit:"50"}),e&&n.set("after",e),t.prev=2,c(!0),s(!1),t.next=7,Ce()({method:"GET",url:"https://www.reddit.com/top.json?".concat(n.toString())});case 7:a=t.sent,f(B(a.data.data.children)),c(!1),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(2),!Ce.a.isCancel(t.t0)){t.next=16;break}return t.abrupt("return");case 16:s(!0);case 17:case"end":return t.stop()}}),t,null,[[2,12]])}))),[e,f]);return Object(a.useEffect)((function(){e!==u&&b()}),[f,b,u,e]),{loading:r,error:l,posts:d,selectedPost:m,loadPosts:b}};function Ie(){var e=Object(o.a)(["\n  margin-right: 20px;\n"]);return Ie=function(){return e},e}function Ae(){var e=Object(o.a)(["\n  flex-grow: 1;\n"]);return Ae=function(){return e},e}function We(){var e=Object(o.a)(["\n  display: flex;\n"]);return We=function(){return e},e}var De=Object(Ee.a)((function(e){return{drawer:Object(ve.a)({},e.breakpoints.up("sm"),{width:500,flexShrink:0}),appBar:Object(ve.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(500,"px)"),marginLeft:500}),menuButton:Object(ve.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(S.a)({minWidth:580},e.mixins.toolbar),drawerPaper:{width:500},content:{width:600,flexGrow:1,padding:e.spacing(3)}}})),Te=function(e){var t=Object(a.useState)(""),n=Object(pe.a)(t,2),c=n[0],i=n[1],o=Be(c),l=o.posts,s=o.loading,u=o.error,d=o.selectedPost,m=o.loadPosts,f=e.window,b=De(),E=Object(je.a)(),j=r.a.useState(!1),O=Object(pe.a)(j,2),h=O[0],g=O[1],x=Object(w.b)(),k=function(){g(!h)},P=r.a.createElement("div",null,r.a.createElement("div",{className:b.toolbar}),r.a.createElement(v.a,null),r.a.createElement(V,{posts:l,setAfterTag:i,loading:s,error:u})),S=void 0!==f?function(){return f().document.body}:void 0;return r.a.createElement(Le,{className:b.root},r.a.createElement(Oe.a,null),r.a.createElement(he.a,{position:"fixed",className:b.appBar},r.a.createElement(ge.a,null,r.a.createElement(p.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:k,className:b.menuButton},r.a.createElement(Pe.a,null)),r.a.createElement(Fe,{variant:"h6",noWrap:!0},"Reddit posts"),r.a.createElement(Ge,{disabled:!l.every((function(e){return e.dismissed})),onClick:function(){m()},variant:"contained"},"Load More"),r.a.createElement(we.a,{onClick:function(){x(I()),x(y(null))},variant:"contained",color:"secondary"},"Dismiss All"))),r.a.createElement("nav",{className:b.drawer,"aria-label":"mailbox folders"},r.a.createElement(xe.a,{smUp:!0,implementation:"css"},r.a.createElement(ke.a,{container:S,variant:"temporary",anchor:"rtl"===E.direction?"right":"left",open:h,onClose:k,classes:{paper:b.drawerPaper}},P)),r.a.createElement(xe.a,{xsDown:!0,implementation:"css"},r.a.createElement(ke.a,{classes:{paper:b.drawerPaper},variant:"permanent",open:!0},P))),r.a.createElement("main",{className:b.content},r.a.createElement("div",{className:b.toolbar}),r.a.createElement(de,{post:d,flex:!0})))},Le=l.a.div(We()),Fe=Object(l.a)(X.a)(Ae()),Ge=Object(l.a)(we.a)(Ie());var Je=function(){return r.a.createElement(Te,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me=n(20),Ue=Object(Me.c)({allPosts:C,selectedPost:P}),$e=Object(x.a)({reducer:Ue}),qe=document.getElementById("root");i.a.render(r.a.createElement(w.a,{store:$e},r.a.createElement(Je,null)),qe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n.p+"static/media/reddit.9006f32f.png"},90:function(e,t,n){e.exports=n(118)},95:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.9dc31a48.chunk.js.map